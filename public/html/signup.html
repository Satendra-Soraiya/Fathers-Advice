<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Create your FathersAdvice account and join our mentorship community">
    <meta name="keywords" content="mentorship signup, fathersadvice signup, mentorship platform">
    <meta name="author" content="FathersAdvice">
    <meta property="og:title" content="Sign Up - FathersAdvice">
    <meta property="og:description" content="Join our mentorship community today">
    <meta property="og:image" content="/images/og-image.jpg">
    <meta property="og:url" content="https://fathersadvice.com/signup">
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <title>Sign Up - FathersAdvice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/signup_css.css" />
    <style>
      .error-message {
        color: #dc3545;
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 15px;
        display: none;
      }
      .success-message {
        color: #198754;
        background-color: #d1e7dd;
        border: 1px solid #badbcc;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 15px;
        display: none;
      }
      .password-strength-meter {
        height: 4px;
        background-color: #e9ecef;
        border-radius: 2px;
        margin-top: 5px;
      }
      .strength-bar {
        height: 100%;
        border-radius: 2px;
        transition: width 0.3s ease;
      }
      .strength-weak { background-color: #dc3545; width: 25%; }
      .strength-medium { background-color: #ffc107; width: 50%; }
      .strength-good { background-color: #198754; width: 75%; }
      .strength-strong { background-color: #ff7a29; width: 100%; }
    </style>
  </head>
  <body>
    <div class="signup-container">
      <div class="signup-wrapper">
        <!-- Left Side - Form -->
        <div class="form-container">
          <div class="logo-heading">
            <img src="/images/Logo Only.png" class="logo" alt="FathersAdvice Logo" />
            <h2>Create Your Account</h2>
            <p>Join our mentorship community today</p>
          </div>

          <div id="error-message" class="error-message" role="alert" aria-live="assertive"></div>
          <div id="success-message" class="success-message" role="status" aria-live="polite"></div>

          <form id="signupForm" novalidate>
            <div class="form-group">
              <div class="input-group">
                <i class="fas fa-user" aria-hidden="true"></i>
                <input 
                  type="text" 
                  name="name" 
                  required 
                  placeholder="Full Name"
                  aria-label="Full Name"
                  autocomplete="name"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <input 
                  type="email" 
                  name="email" 
                  required 
                  placeholder="Email Address"
                  aria-label="Email Address"
                  autocomplete="email"
                />
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <div class="password-input-group">
                  <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    required
                    aria-label="Password"
                    autocomplete="new-password"
                  >
                  <button 
                    type="button" 
                    class="toggle-password" 
                    aria-label="Toggle password visibility"
                    aria-pressed="false"
                  >
                    <i class="fas fa-eye" aria-hidden="true"></i>
                  </button>
                </div>
                <div class="password-strength-meter">
                  <div class="strength-bar"></div>
                </div>
                <div class="password-strength-text" aria-live="polite"></div>
              </div>
              <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <div class="password-input-group">
                  <input 
                    type="password" 
                    id="confirmPassword" 
                    name="confirmPassword" 
                    required
                    aria-label="Confirm Password"
                    autocomplete="new-password"
                  >
                  <button 
                    type="button" 
                    class="toggle-password" 
                    aria-label="Toggle password visibility"
                    aria-pressed="false"
                  >
                    <i class="fas fa-eye" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="input-group">
                <i class="fas fa-user-tag" aria-hidden="true"></i>
                <select 
                  id="role" 
                  name="role" 
                  required
                  aria-label="Select your role"
                >
                  <option value="">Select your role</option>
                  <option value="mentor">Mentor</option>
                  <option value="mentee">Mentee</option>
                </select>
              </div>
              <div class="input-group">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <input 
                  type="tel" 
                  name="phone" 
                  required 
                  placeholder="Phone Number"
                  aria-label="Phone Number"
                  autocomplete="tel"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                <input 
                  type="text" 
                  name="address" 
                  required 
                  placeholder="Address"
                  aria-label="Address"
                  autocomplete="street-address"
                />
              </div>
            </div>

            <div class="form-group">
              <div class="input-group">
                <i class="fas fa-language" aria-hidden="true"></i>
                <input 
                  type="text" 
                  name="language" 
                  required 
                  placeholder="Preferred Language"
                  aria-label="Preferred Language"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                <input 
                  type="text" 
                  name="qualification" 
                  required 
                  placeholder="Qualification"
                  aria-label="Qualification"
                />
              </div>
            </div>

            <div class="terms-group">
              <input 
                type="checkbox" 
                id="terms" 
                required
                aria-label="I agree to the Terms of Service and Privacy Policy"
              />
              <label for="terms">I agree to the <a href="/terms" aria-label="Terms of Service">Terms of Service</a> and <a href="/privacy" aria-label="Privacy Policy">Privacy Policy</a></label>
            </div>

            <button type="submit" class="submit-btn" aria-label="Create your account">
              <span>Create Account</span>
              <i class="fas fa-arrow-right" aria-hidden="true"></i>
            </button>
          </form>

          <div class="social-signup">
            <p>Or sign up with</p>
            <div class="social-buttons">
              <button class="social-btn google" aria-label="Sign up with Google">
                <i class="fab fa-google" aria-hidden="true"></i>
                <span>Google</span>
              </button>
              <button class="social-btn linkedin" aria-label="Sign up with LinkedIn">
                <i class="fab fa-linkedin-in" aria-hidden="true"></i>
                <span>LinkedIn</span>
              </button>
            </div>
          </div>

          <p class="login-link">
            Already have an account? <a href="/login" aria-label="Login to your account">Login here</a>
          </p>
        </div>

        <!-- Right Side - Features -->
        <div class="features-container" style="background: linear-gradient(135deg, #ff7a29 0%, #ffb347 100%); color: #fff; display: flex; align-items: center;">
          <div class="features-content">
            <h3>Why Join FathersAdvice?</h3>
            <div class="feature-list">
              <div class="feature-item">
                <i class="fas fa-handshake" aria-hidden="true"></i>
                <div>
                  <h4>Personalized Matching</h4>
                  <p>Find the perfect mentor based on your goals and interests</p>
                </div>
              </div>
              <div class="feature-item">
                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                <div>
                  <h4>Flexible Scheduling</h4>
                  <p>Schedule sessions at your convenience</p>
                </div>
              </div>
              <div class="feature-item">
                <i class="fas fa-chart-line" aria-hidden="true"></i>
                <div>
                  <h4>Progress Tracking</h4>
                  <p>Monitor your growth and achievements</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const signupForm = document.getElementById('signupForm');
        const errorMessage = document.getElementById('error-message');
        const successMessage = document.getElementById('success-message');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const strengthBar = document.querySelector('.strength-bar');
        const strengthText = document.querySelector('.password-strength-text');
        const togglePasswordButtons = document.querySelectorAll('.toggle-password');

        // Password strength checker
        function checkPasswordStrength(password) {
          let strength = 0;
          if (password.length >= 8) strength++;
          if (password.match(/[a-z]+/)) strength++;
          if (password.match(/[A-Z]+/)) strength++;
          if (password.match(/[0-9]+/)) strength++;
          if (password.match(/[^a-zA-Z0-9]+/)) strength++;

          return strength;
        }

        function updatePasswordStrength(password) {
          const strength = checkPasswordStrength(password);
          let strengthClass = '';
          let strengthMessage = '';

          switch (strength) {
            case 0:
            case 1:
              strengthClass = 'strength-weak';
              strengthMessage = 'Weak password';
              break;
            case 2:
              strengthClass = 'strength-medium';
              strengthMessage = 'Medium password';
              break;
            case 3:
              strengthClass = 'strength-good';
              strengthMessage = 'Good password';
              break;
            case 4:
            case 5:
              strengthClass = 'strength-strong';
              strengthMessage = 'Strong password';
              break;
          }

          strengthBar.className = 'strength-bar ' + strengthClass;
          strengthText.textContent = strengthMessage;
        }

        // Handle form submission
        signupForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          // Clear previous messages
          errorMessage.style.display = 'none';
          successMessage.style.display = 'none';
          
          // Validate passwords match
          if (passwordInput.value !== confirmPasswordInput.value) {
            errorMessage.textContent = 'Passwords do not match';
            errorMessage.style.display = 'block';
            return;
          }

          // Validate password strength
          if (checkPasswordStrength(passwordInput.value) < 3) {
            errorMessage.textContent = 'Please use a stronger password';
            errorMessage.style.display = 'block';
            return;
          }

          const formData = new FormData(signupForm);
          const data = Object.fromEntries(formData.entries());
          
          try {
            const response = await fetch('/signup', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(data)
            });

            const result = await response.json();
            
            if (response.ok && result.success) {
              successMessage.textContent = 'Account created successfully! Redirecting...';
              successMessage.style.display = 'block';
              setTimeout(() => {
                window.location.href = result.redirect;
              }, 1000);
            } else {
              errorMessage.textContent = result.error || 'An error occurred during signup';
              errorMessage.style.display = 'block';
            }
          } catch (error) {
            console.error('Signup error:', error);
            errorMessage.textContent = 'An error occurred. Please try again.';
            errorMessage.style.display = 'block';
          }
        });

        // Password strength indicator
        passwordInput.addEventListener('input', (e) => {
          updatePasswordStrength(e.target.value);
        });

        // Toggle password visibility
        togglePasswordButtons.forEach(button => {
          button.addEventListener('click', function() {
            const input = this.previousElementSibling;
            const isPasswordVisible = input.type === 'text';
            input.type = isPasswordVisible ? 'password' : 'text';
            const icon = this.querySelector('i');
            
            if (isPasswordVisible) {
              icon.classList.remove('fa-eye-slash');
              icon.classList.add('fa-eye');
              this.setAttribute('aria-pressed', 'false');
            } else {
              icon.classList.remove('fa-eye');
              icon.classList.add('fa-eye-slash');
              this.setAttribute('aria-pressed', 'true');
            }
          });
        });

        // Handle social signup buttons
        document.querySelector('.social-btn.google').addEventListener('click', () => {
          window.location.href = '/auth/google';
        });

        document.querySelector('.social-btn.linkedin').addEventListener('click', () => {
          window.location.href = '/auth/linkedin';
        });
      });
    </script>
  </body>
</html>
